# two hashtbale
# time O(1)
# space O(n)

class UndergroundSystem(object):

    def __init__(self):
        self.start = {} # key, id; value: start, t
        self.ave_info = {} # key, (s, e); value: t, p

    def checkIn(self, id, stationName, t):
        
        self.start[id] = [stationName, t]

    def checkOut(self, id, stationName, t):
        
        s, t1 = self.start[id]
        index = (s, stationName)
        pre_t, pre_p = self.ave_info.get(index, (0, 0))
        time = pre_t + t - t1
        people = pre_p + 1
        self.ave_info[index] = [time, people]

    def getAverageTime(self, startStation, endStation):
        
        t, p = self.ave_info.get((startStation, endStation))
        return t * 1.0 / p

